model EventType {
  id             Int             @id @default(autoincrement())
  name           String          @unique
  order          Int
  Event          Event[]
  eventSchedules EventSchedule[]
}

model EventInstance {
  id            Int @id @default(autoincrement())
  eventId       Int
  responsibleId Int

  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
  createdBy Int
  updatedBy Int?
  deletedAt DateTime?
  deletedBy Int?

  Event  Event  @relation(fields: [eventId], references: [id])
  Person Person @relation(fields: [responsibleId], references: [id])

  AttendanceSession AttendanceSession[]

  @@unique([eventId, responsibleId])
  @@index([eventId])
}

model Event {
  id             Int             @id @default(autoincrement())
  name           String
  eventTypeId    Int
  EventType      EventType       @relation(fields: [eventTypeId], references: [id])
  eventInstances EventInstance[]

  @@index([eventTypeId])
}

model EventSchedule {
  id               Int @id @default(autoincrement())
  eventTypeId      Int
  trainingModuleId Int
  frequency        Int // Ej: 3 (this module is executed 3 times)

  EventType      EventType      @relation(fields: [eventTypeId], references: [id])
  TrainingModule TrainingModule @relation(fields: [trainingModuleId], references: [id])

  @@unique([eventTypeId, trainingModuleId])
  @@index([eventTypeId, trainingModuleId])
}
